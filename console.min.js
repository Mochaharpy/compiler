// @ts-nocheck
class CustomConsole{constructor(t,e={}){const o={width:"100%",height:"100%",backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--console-bg")||"#1a1a1a",textColor:getComputedStyle(document.documentElement).getPropertyValue("--console-text")||"#e0e0e0",fontFamily:"monospace",fontSize:"14px",logLevels:["log","info","warn","error"]};this.options={...o,...e},this.logs=[],this.groups=[],this.counts={},this.filter=null,this.filterText="",this.activeFilterButton=null,this._createUI(t),this._overrideConsole(),this._attachGlobalErrorHandler()}_createUI(t){this.container=document.createElement("div"),this.container.className="custom-console",Object.assign(this.container.style,{width:this.options.width,height:this.options.height,fontFamily:this.options.fontFamily,fontSize:this.options.fontSize}),t.appendChild(this.container),this.controls=document.createElement("div"),this.controls.className="console-controls",this.container.appendChild(this.controls);const e=document.createElement("span");e.textContent="Filter by Type:",this.controls.appendChild(e),this.options.logLevels.forEach((t=>{const e=document.createElement("button");e.textContent=t,e.dataset.type=t,e.classList.add("filter-button"),e.onclick=()=>this._filterLogs(t,e),this.controls.appendChild(e)}));const o=document.createElement("button");o.textContent="all",o.classList.add("filter-button"),o.onclick=()=>this._filterLogs(null,o),this.controls.appendChild(o),this.activeFilterButton=o,this.activeFilterButton.classList.add("active"),this.clearButton=document.createElement("button"),this.clearButton.textContent="clear",this.clearButton.classList.add("clear-button","ml-4"),this.clearButton.onclick=()=>this.clearLogs(),this.controls.appendChild(this.clearButton),this.textFilterInput=document.createElement("input"),this.textFilterInput.type="text",this.textFilterInput.placeholder="Filter text...",this.textFilterInput.classList.add("text-filter-input"),this.textFilterInput.addEventListener("input",(t=>{this.filterText=t.target.value.toLowerCase(),this._applyFilters()})),this.controls.appendChild(this.textFilterInput),this.output=document.createElement("div"),this.output.className="console-output",this.container.appendChild(this.output)}_createLogEntry(t,...e){const o=document.createElement("div");o.className=`log-entry ${t}`,o.dataset.type=t,o.dataset.groupLevel=this.groups.length;const n=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),s=document.createElement("span");return s.className="timestamp",s.textContent=`${n}: `,o.appendChild(s),e.forEach((t=>{o.appendChild(this._formatArg(t));const e=document.createTextNode(" ");o.appendChild(e)})),o}_log(t,...e){const o=this._createLogEntry(t,...e);this.logs.push(o),this._appendLogEntry(o)}_appendLogEntry(t){if((!this.filter||t.dataset.type===this.filter)&&(!this.filterText||t.textContent.toLowerCase().includes(this.filterText))){if(this.groups.length>0){this.groups[this.groups.length-1].appendChild(t)}else this.output.appendChild(t);Math.abs(this.output.scrollHeight-this.output.scrollTop-this.output.clientHeight)<=30&&(this.output.scrollTop=this.output.scrollHeight)}}_formatArg(t){const e=document.createElement("span");if(null===t)e.textContent="null",e.dataset.type="null";else if(void 0===t)e.textContent="undefined",e.dataset.type="undefined";else if("object"==typeof t)if(t instanceof HTMLElement)"table"===t.tagName.toLowerCase()?(e.appendChild(t),e.dataset.type="table-element"):(e.textContent=`<${t.tagName.toLowerCase()}>`,e.dataset.type="html-element");else if(t instanceof Error)e.textContent=`${t.name}: ${t.message}`,e.dataset.type="error-object";else try{const o=document.createElement("details"),n=document.createElement("summary");n.textContent=Array.isArray(t)?`[Array(${t.length})]`:"[Object]",n.dataset.type="object-summary",o.appendChild(n);const s=document.createElement("pre");s.textContent=JSON.stringify(t,null,2),o.appendChild(s),e.appendChild(o)}catch(t){t instanceof TypeError&&t.message.includes("circular structure")?(e.textContent="{Circular reference detected}",e.style.color="var(--warn-color)"):(e.textContent=`[Object could not be displayed: ${t.message}]`,console.error("Error during JSON.stringify:",t))}else"string"==typeof t?(e.textContent=`'${t}'`,e.dataset.type="string"):"number"==typeof t?(e.textContent=t.toString(),e.dataset.type="number"):"boolean"==typeof t?(e.textContent=t.toString(),e.dataset.type="boolean"):e.textContent=t.toString();return e}_filterLogs(t,e){this.activeFilterButton&&this.activeFilterButton.classList.remove("active"),this.filter=t,this.activeFilterButton=e,this.activeFilterButton&&this.activeFilterButton.classList.add("active"),this._applyFilters()}_applyFilters(){this.output.innerHTML="";const t=[];this.logs.forEach((e=>{const o=!this.filter||e.dataset.type===this.filter,n=!this.filterText||e.textContent.toLowerCase().includes(this.filterText);if(o&&n){const o=e.cloneNode(!0),n=parseInt(e.dataset.groupLevel||"0",10);for(;t.length>n;)t.pop();let s=this.output;t.length>0&&(s=t[t.length-1]),o.classList.contains("group-details")?(e.open&&(o.open=!0),s.appendChild(o),t.push(o)):s.appendChild(o)}})),this.output.scrollTop=this.output.scrollHeight}clearLogs(){this.output.innerHTML="",this.logs=[],this.groups=[],this.counts={};const t=this.controls.querySelector('.filter-button[data-type="null"]');t&&this._filterLogs(null,t)}_overrideConsole(){const t={...window.console},e=e=>(...o)=>{this._log(e,...o),t[e](...o)};window.console.log=e("log"),window.console.info=e("info"),window.console.warn=e("warn"),window.console.error=e("error"),window.console.debug=e("log"),window.console.group=e=>{const o=document.createElement("details");o.setAttribute("open",""),o.className="log-entry group-details";const n=document.createElement("summary");if(n.textContent=e,n.style.cursor="pointer",o.style.marginLeft="10px",o.appendChild(n),o.dataset.groupLevel=this.groups.length,this.groups.length>0){this.groups[this.groups.length-1].appendChild(o)}else this.output.appendChild(o);this.logs.push(o),this.groups.push(o),t.group(e)},window.console.groupCollapsed=e=>{const o=document.createElement("details");o.className="log-entry group-details";const n=document.createElement("summary");if(n.textContent=e,n.style.cursor="pointer",o.style.marginLeft="10px",o.appendChild(n),o.dataset.groupLevel=this.groups.length,this.groups.length>0){this.groups[this.groups.length-1].appendChild(o)}else this.output.appendChild(o);this.logs.push(o),this.groups.push(o),t.group(e)},window.console.groupEnd=()=>{this.groups.pop(),t.groupEnd()},window.console.count=(e="default")=>{this.counts[e]||(this.counts[e]=0),this.counts[e]++,this._log("log",`${e}: ${this.counts[e]}`),t.count(e)},window.console.countReset=(e="default")=>{null!=this.counts[e]&&null!=this.counts[e]||this._log("warn",`Count for '${e}' does not exist`),this.counts[e]=null,t.countReset(e)},window.console.table=e=>{const o=document.createElement("table");if(o.classList.add("w-full","my-2"),o.style.fontFamily=this.options.fontFamily,o.style.fontSize=this.options.fontSize,Array.isArray(e)&&e.length>0){const t=Object.keys(e[0]),n=document.createElement("thead"),s=document.createElement("tr");t.forEach((t=>{const e=document.createElement("th");e.textContent=t,e.classList.add("p-2","border","text-left","bg-gray-700"),s.appendChild(e)})),n.appendChild(s),o.appendChild(n);const l=document.createElement("tbody");e.forEach((e=>{const o=document.createElement("tr");t.forEach((t=>{const n=document.createElement("td");n.textContent=e[t],n.classList.add("p-2","border"),o.appendChild(n)})),l.appendChild(o)})),o.appendChild(l),this._log("log",o)}else if("object"==typeof e&&null!==e){const t=Object.keys(e),n=document.createElement("thead"),s=document.createElement("tr"),l=document.createElement("th");l.textContent="(index)",l.classList.add("p-2","border","text-left","bg-gray-700"),s.appendChild(l);const i=document.createElement("th");i.textContent="Value",i.classList.add("p-2","border","text-left","bg-gray-700"),s.appendChild(i),n.appendChild(s),o.appendChild(n);const r=document.createElement("tbody");t.forEach((t=>{const o=document.createElement("tr"),n=document.createElement("td");n.textContent=t,n.classList.add("p-2","border"),o.appendChild(n);const s=document.createElement("td");s.textContent=e[t],s.classList.add("p-2","border"),o.appendChild(s),r.appendChild(o)})),o.appendChild(r),this._log("log",o)}else this._log("warn","console.table: Data is not an array or object, or is empty.");t.table(e)},window.console.assert=(e,...o)=>{e||this._log("error","Assertion failed:",...o),t.assert(e,...o)},window.console.dir=(...e)=>{this._log("log",...e),t.dir(...e)},window.console.dirxml=(...e)=>{this._log("log",...e),t.dirxml(...e)}}_attachGlobalErrorHandler(){window.onerror=(t,e,o,n,s)=>(this._log("error",`Uncaught: ${t}`,`at ${e}:${o}:${n}`),s&&s.stack&&this._log("error",s.stack),!0)}}function sanitizeArgs(t){return t.map((t=>t instanceof HTMLElement?`<${t.tagName.toLowerCase()} id="${t.id||""}" class="${t.className||""}">`:t))}const container=document.getElementById("console"),ustomConsole=new CustomConsole(container);window.addEventListener("message",(t=>{if("iframe-console"!==t.data?.type)return;const{logType:e,args:o}=t.data;if(!ustomConsole)return;const n=ustomConsole,s=sanitizeArgs(o);switch(e){case"log":case"info":case"warn":case"error":case"debug":n._log(e,...s);break;case"group":console.group(...s);break;case"groupCollapsed":console.groupCollapsed(...s);break;case"groupEnd":console.groupEnd();break;case"count":console.count(...s);break;case"countReset":console.countReset(...s);break;case"table":console.table(...s);break;case"clear":n.clearLogs();break;case"assert":console.assert(...s);break;case"dir":case"dirxml":console.dir(...s);break;default:n._log("info",`[Unhandled method: ${e}]`,...s)}}));const consoleCheck=document.getElementById("consoleCheck"),styles=getComputedStyle(root);consoleCheck.addEventListener("change",(()=>{consoleCheck.checked?(root.style.setProperty("--height",consoleHeight),container.style.display="block"):(consoleHeight=styles.getPropertyValue("--height"),root.style.setProperty("--height","100%"),container.style.display="none")}));const resetConsoleCheck=document.getElementById("consoleResetCheck");resetConsoleCheck.addEventListener("change",(()=>{resetConsole=resetConsoleCheck.checked}));
